int flag;
char uname_d = "Guest";
class user
	{
		char uname[50];
		char pass[22];
		char ch;

		public :

		char* pp();
		char* pu();

		void gu()
			{
				gets(uname);
			}
		void gp();
		void ux();
		int chk();

		char* runame();
}ob1;

int m , n , k;

char* user::pp()
	{
		return pass;
	}
char* user::pu()
	{
		return uname;
	}

int user::chk()
	{
		if (flag == 1)
			return 1;
		else
			return 0;
	}
char* user::runame()
	{
		if (chk() == 1)
		return uname;
		else
		return uname_d;
	}
void user::gp()
	{
		for (int num = 0 ; num < 9 ; num++)
		{
	     z:		ch = getch();
			if(ch == 8)
				{
					k = wherex();
					gotoxy(k - 1, wherey());
					cout<<" ";
					gotoxy(k - 1, wherey());
					--num;
					goto z;
				}
			else if(ch == 13)
				break;
			else
			{
			cout<<"*";
			pass[num] = ch;
			}
		}
		cout<<pass;

	}



void user::ux()
	{
		clrscr();
		cout<<"\n\n\n\n\n\n\n\n";
		cout<<"\t\t\t*************************\n";
		for(int j = 0 ; j < 2 ; j++)
			{
				cout<<"\t\t\t*";
				m =  wherex();
				n = wherey();
				if (j == 0)
				{
					cout<<"Username : ";
					gotoxy((m + 23), n);
					cout<<"*\n";
				}
				else if (j == 1)
				{
					cout<<"Password : ";
					gotoxy((m + 23), n);
					cout<<"*\n";
				}
			}
		cout<<"\t\t\t*************************\n";


}

void login()
	{
		user ob ;
		ifstream fs;
		ob1.ux();
		gotoxy((m + 11) , (n - 1));
		ob1.gu();
		gotoxy((m + 11) , n) ;
		ob1.gp();
		getch();
		fs.open("newuser.dat",ios::binary|ios::in);
		while (fs)
		{
		fs.read((char*)&ob , sizeof(ob));
		if (strcmp(ob.pp(),ob1.pp()) == 0 && strcmp(ob.pu(),ob1.pu()) == 0)
			{
				clrscr();
				cout<<"Login Successful";
				flag = 1;
				getch();
				break;

			}
		}
		if (flag == 0)
			{
				clrscr();
				cout<<"ACESS DENIED";
				getch();
			}
	}
void signup()
	{
		char pass2[10];
		int flag = 0;
	    y:	clrscr();
		user ob;
		cout<<"\n\n\t\tEnter Desired Username : ";
		ob1.gu();
		ifstream fin;
		fin.open("newuser.dat",ios::binary|ios::in);
		while (fin)
		{
		fin.read((char*)&ob , sizeof(ob));
		if(strcmp(ob1.pu(),ob.pu()) == 0)
			{
			  cout<<"\nThis Username Is Already Registered";
			  cout<<"\nPress Any Key To Continue";
			  getch();
			  goto y;
			}
		}
		cout<<"\n\n\t\tEnter Password (Less Than 9 Character)  : ";
		ob1.gp();
		cout<<"\n\n\t\tEnter Password Again : ";
		gets(pass2);
		if(strcmp(ob1.pp(),pass2) != 0)
			{
			cout<<"\nBoth The Passwords Must Match !!!";
			cout<<"\nPress Any Key To Continue";
			getch();
			goto y;
		}
		fin.close();
		ofstream fout;
		fout.open("newuser.dat",ios::out|ios::binary|ios::ate);
		fout.write((char*)&ob1,sizeof(ob1));
		fout.close();
		cout<<"\nAll Done ";
		getch();

	}



